{
  "hash": "3acf766f7efc93e0b1224ba8b0d21dfc",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Est-ce que R et Shiny peuvent faire de moi un meilleur pêcheur ? Partie 2\"\nsubtitle: \"Analyse exploratoire de mes données de pêche\"\nauthor: \"Aurélien Callens\"\nlang: fr\ndate: \"2020-09-25\"\nformat: \n  html:\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show the code\"\nexecute:\n  freeze: true\ntoc: true\ncategories:\n  - R\n  - EDA\n---\n\n\n\n\nDans le précédent article de blog, j'ai décrit en détail comment j'ai créé une application Shiny qui stocke les données de mes sessions de pêche. Dans cet article, je vais explorer les données que j'ai collectées au cours de l'année dernière.\n\nPour résumer, mon application stocke les données dans deux fichiers csv. Le premier contient des variables liées aux conditions de pêche au début et à la fin de la session, telles que :\n\n+ Heure\n+ Longitude et Latitude\n+ Conditions météorologiques (9 au total : Température de l'air, Pression atmosphérique, Vitesse et direction du vent, etc.)\n+ Conditions de marée (Niveau d'eau actuel, Statut de la marée et Heure depuis le pic de la marée)\n+ Commentaires spécifiques\n\nLe second contient des informations sur mes prises :\n\n+ Heure de la prise\n+ Temps écoulé depuis le début de la session\n+ Espèce\n+ Longueur du poisson\n+ Leurre utilisé\n+ Couleur du leurre\n+ Longueur du leurre\n\n## Importation et nettoyage de mes données de pêche\n\nLa première étape de cette analyse consiste à importer les deux fichiers csv et à effectuer quelques transformations.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Change character variables to factor\nsession_data %<>% \nmutate_at(vars(Weather, Tide_status), as.factor)\n\n# Change character variables to factor\ncatch_data %<>% \nmutate_at(vars(species, lure, colour, length_lure), as.factor)\n```\n:::\n\n\n\n&nbsp;\n\nAprès avoir nettoyé et réarrangé les données (le code est caché ci-dessous), on peut explorer graphiquement les données !\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Compute mean conditions (between beg and end session) \n\nmean_weather_cond <- session_data %>% \ngroup_by(Session) %>% \nselect(-c(Long, Lat, Water_level, Tide_time)) %>% \nsummarise_if(is.numeric, mean) \n\n\n# Extract fixed conditions and comments + join with mean cond \n\nfixed_cond_com <- session_data %>% \ngroup_by(Session) %>% \nselect(Session, Comments, Long, Lat, Weather) %>% \nmutate(Comments_parsed = paste(na.omit(Comments), collapse = \"\")) %>% \nselect(-Comments) %>% \nslice(1) %>% \ninner_join(mean_weather_cond, by = \"Session\")\n\n# Create end and beg variables for WL, Time , Tide_time, Tide_status\n\nbeg_end_vars <- session_data %>% \nselect(Session, Status, Water_level, Time, Tide_time, Tide_status) %>% \npivot_wider(names_from = Status,\nvalues_from = c(Time, Water_level,  Tide_time, Tide_status))\n\n\n# Assemble both file and calculate duration\n\ndat_ses <-  inner_join(beg_end_vars,\nfixed_cond_com,\nby = \"Session\")\n\n# Calculate duration of the sessions\n\ndat_ses %<>% \nmutate(duration = round(difftime(Time_end,  Time_beg,  units = \"hours\"),\ndigits = 1))\n\ncatch_cond <- full_join(dat_ses,\ncatch_data, by = c( \"Session\" = \"n_ses\" )) %>% \nmutate(Session = factor(Session, levels = 1:length(dat_ses$Session)))\n\ncatch_cond %<>%\nmutate(Tide_status_ses = paste0(Tide_status_beg, \"_\", Tide_status_end))\n\n# Simplify the Tide status variable\n\ncatch_cond$Tide_status_ses <- sapply(catch_cond$Tide_status_ses , function(x){switch(x, \n\"Up_Dead\" = \"Up\",\n\"Up_Up\" = \"Up\",\n\"Up_Down\" = \"Dead\",\n\"Down_Dead\" = \"Down\",\n\"Down_Up\" = \"Dead\",\n\"Down_Down\"  = \"Down\",\n\"Dead_Dead\" = \"Dead\",\n\"Dead_Up\" = \"Up\",\n\"Dead_Down\" = \"Down\"\n)}, USE.NAMES = F)\n```\n:::\n\n\n\n## Exploration graphique\n\n### Mes lieux de pêche  \n\nOn peut visualiser les endroits où j'ai le plus pêché en utilisant le package *leaflet* :\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate the number of fish caught by session \nfish_number <-  catch_cond  %>% na.omit() %>% group_by(Session) %>%  summarise(nb = length(Session))\n\n# Dataframe with variables we want to show on the map\nmap_data <- catch_cond %>% \ngroup_by(Session) %>%\nselect(Session, Time_beg, Time_end, Long,\nLat, Water_level_beg, Tide_status_beg, Tide_time_beg, duration) \n\nmap_data <- full_join(map_data, fish_number)\n\nmap_data$nb[is.na(map_data$nb)] <- 0\n\n# Interactive map with Popup for each session\nlibrary(leaflet)\n\nleaflet(map_data, width = \"100%\") %>% addTiles() %>%\naddPopups(lng = ~Long, lat = ~Lat, \nwith(map_data, sprintf(\"<b>Session %.0f : %.1f h</b> <br/> %s <br/> %.0f  fish <br/> Water level: %.0f m, %s, %.0f min since last peak\",                                         Session, duration,  Time_beg, nb, Water_level_beg, Tide_status_beg, Tide_time_beg)), \noptions = popupOptions(maxWidth = 100, minWidth = 50))\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"htmlwidget-93fd912d89bfa5ad9b81\" style=\"width:100%;height:480px;\" class=\"leaflet html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-93fd912d89bfa5ad9b81\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org/copyright/\\\">OpenStreetMap<\\/a>,  <a href=\\\"https://opendatacommons.org/licenses/odbl/\\\">ODbL<\\/a>\"}]},{\"method\":\"addPopups\",\"args\":[[43.4903501,43.4903501,43.4903501,43.4948349,43.4948349,43.4948349,43.4948349,43.4948349,43.4929536,43.4929536,43.4717306,43.4856133,43.4856133,43.4898314,43.4879548,43.4891374,43.4888454,43.4903375,43.4907003,43.4883211,43.4870525,43.4882129,43.4902466,43.4879819,43.4879819,43.489656,43.4667765,43.4854263,43.4888221,43.4884741,43.4854276,43.4854276,43.4854276,43.490646,43.490646,43.490646,43.4884784,43.4891888,43.4885291,43.4885291,43.4849954,43.4849954,43.4849954,43.4853693,43.4865331,43.4853571,43.4881548,43.4865984,43.4895741,43.4831239,43.4831239,43.4831239,43.4831239,43.4831239,43.4831239,43.4831239,43.484568,43.484568,43.484568,43.484568,43.484568,43.4893757,43.4893757,43.4893757,43.4893757,43.4893757,43.4893757,43.4893757,43.4893757,43.4893757,43.4893757,43.4893757,43.4893757,43.4850086,43.4850086,43.4850086,43.488591,43.488659,43.4833471],[-1.474845,-1.474845,-1.474845,-1.4702738,-1.4702738,-1.4702738,-1.4702738,-1.4702738,-1.4727054,-1.4727054,-1.4726262,-1.4762295,-1.4762295,-1.4645089,-1.4741375,-1.4619148,-1.4750443,-1.4523802,-1.471115,-1.4737693,-1.4741375,-1.4648611,-1.4522513,-1.4720217,-1.4720217,-1.4784552,-1.4835086,-1.4752964,-1.4768579,-1.4752235,-1.4752846,-1.4752846,-1.4752846,-1.4753465,-1.4753465,-1.4753465,-1.4801831,-1.4717195,-1.4740189,-1.4740189,-1.5000672,-1.5000672,-1.5000672,-1.4762834,-1.4757226,-1.4762743,-1.4748271,-1.4754897,-1.4745318,-1.4726297,-1.4726297,-1.4726297,-1.4726297,-1.4726297,-1.4726297,-1.4726297,-1.4745762,-1.4745762,-1.4745762,-1.4745762,-1.4745762,-1.474431,-1.474431,-1.474431,-1.474431,-1.474431,-1.474431,-1.474431,-1.474431,-1.474431,-1.474431,-1.474431,-1.474431,-1.4765871,-1.4765871,-1.4765871,-1.4750231,-1.4743773,-1.4702696],[\"<b>Session 1 : 0.9 h<\\/b> <br/> 2019-04-09 19:23:09 <br/> 3  fish <br/> Water level: 4 m, Up, 340 min since last peak\",\"<b>Session 1 : 0.9 h<\\/b> <br/> 2019-04-09 19:23:09 <br/> 3  fish <br/> Water level: 4 m, Up, 340 min since last peak\",\"<b>Session 1 : 0.9 h<\\/b> <br/> 2019-04-09 19:23:09 <br/> 3  fish <br/> Water level: 4 m, Up, 340 min since last peak\",\"<b>Session 2 : 2.1 h<\\/b> <br/> 2019-04-10 18:23:40 <br/> 5  fish <br/> Water level: 3 m, Up, 240 min since last peak\",\"<b>Session 2 : 2.1 h<\\/b> <br/> 2019-04-10 18:23:40 <br/> 5  fish <br/> Water level: 3 m, Up, 240 min since last peak\",\"<b>Session 2 : 2.1 h<\\/b> <br/> 2019-04-10 18:23:40 <br/> 5  fish <br/> Water level: 3 m, Up, 240 min since last peak\",\"<b>Session 2 : 2.1 h<\\/b> <br/> 2019-04-10 18:23:40 <br/> 5  fish <br/> Water level: 3 m, Up, 240 min since last peak\",\"<b>Session 2 : 2.1 h<\\/b> <br/> 2019-04-10 18:23:40 <br/> 5  fish <br/> Water level: 3 m, Up, 240 min since last peak\",\"<b>Session 3 : 2.3 h<\\/b> <br/> 2019-04-17 20:45:27 <br/> 2  fish <br/> Water level: 1 m, Down, 305 min since last peak\",\"<b>Session 3 : 2.3 h<\\/b> <br/> 2019-04-17 20:45:27 <br/> 2  fish <br/> Water level: 1 m, Down, 305 min since last peak\",\"<b>Session 4 : 0.8 h<\\/b> <br/> 2019-04-21 17:58:26 <br/> 0  fish <br/> Water level: 4 m, Up, 320 min since last peak\",\"<b>Session 5 : 2.0 h<\\/b> <br/> 2019-04-22 18:18:23 <br/> 2  fish <br/> Water level: 4 m, Up, 305 min since last peak\",\"<b>Session 5 : 2.0 h<\\/b> <br/> 2019-04-22 18:18:23 <br/> 2  fish <br/> Water level: 4 m, Up, 305 min since last peak\",\"<b>Session 6 : 1.0 h<\\/b> <br/> 2019-04-26 18:30:25 <br/> 0  fish <br/> Water level: 2 m, Up, 110 min since last peak\",\"<b>Session 7 : 0.6 h<\\/b> <br/> 2019-05-06 18:38:02 <br/> 0  fish <br/> Water level: 4 m, Dead, 15 min since last peak\",\"<b>Session 8 : 0.8 h<\\/b> <br/> 2019-05-10 19:37:30 <br/> 0  fish <br/> Water level: 3 m, Up, 265 min since last peak\",\"<b>Session 9 : 1.6 h<\\/b> <br/> 2019-05-10 20:23:30 <br/> 1  fish <br/> Water level: 4 m, Up, 315 min since last peak\",\"<b>Session 10 : 1.0 h<\\/b> <br/> 2019-05-16 16:08:35 <br/> 0  fish <br/> Water level: 4 m, Dead, 30 min since last peak\",\"<b>Session 11 : 0.9 h<\\/b> <br/> 2019-05-21 19:18:50 <br/> 0  fish <br/> Water level: 4 m, Dead, 15 min since last peak\",\"<b>Session 12 : 0.6 h<\\/b> <br/> 2019-05-23 19:45:32 <br/> 0  fish <br/> Water level: 4 m, Up, 330 min since last peak\",\"<b>Session 13 : 2.2 h<\\/b> <br/> 2019-05-29 18:50:42 <br/> 1  fish <br/> Water level: 2 m, Down, 290 min since last peak\",\"<b>Session 14 : 1.6 h<\\/b> <br/> 2019-05-30 13:27:48 <br/> 0  fish <br/> Water level: 3 m, Up, 295 min since last peak\",\"<b>Session 15 : 0.9 h<\\/b> <br/> 2019-06-01 15:28:24 <br/> 0  fish <br/> Water level: 4 m, Up, 335 min since last peak\",\"<b>Session 16 : 0.8 h<\\/b> <br/> 2019-06-01 21:28:06 <br/> 2  fish <br/> Water level: 1 m, Down, 325 min since last peak\",\"<b>Session 16 : 0.8 h<\\/b> <br/> 2019-06-01 21:28:06 <br/> 2  fish <br/> Water level: 1 m, Down, 325 min since last peak\",\"<b>Session 17 : 1.2 h<\\/b> <br/> 2019-06-02 14:26:22 <br/> 0  fish <br/> Water level: 3 m, Up, 235 min since last peak\",\"<b>Session 18 : 1.0 h<\\/b> <br/> 2019-06-07 19:20:32 <br/> 0  fish <br/> Water level: 4 m, Up, 315 min since last peak\",\"<b>Session 19 : 1.6 h<\\/b> <br/> 2019-06-19 18:13:14 <br/> 0  fish <br/> Water level: 4 m, Up, 340 min since last peak\",\"<b>Session 20 : 1.1 h<\\/b> <br/> 2019-06-22 20:38:02 <br/> 0  fish <br/> Water level: 4 m, Dead, 370 min since last peak\",\"<b>Session 21 : 0.8 h<\\/b> <br/> 2019-06-26 20:13:34 <br/> 1  fish <br/> Water level: 2 m, Up, 115 min since last peak\",\"<b>Session 22 : 0.2 h<\\/b> <br/> 2019-06-27 20:05:43 <br/> 3  fish <br/> Water level: 2 m, Up, 45 min since last peak\",\"<b>Session 22 : 0.2 h<\\/b> <br/> 2019-06-27 20:05:43 <br/> 3  fish <br/> Water level: 2 m, Up, 45 min since last peak\",\"<b>Session 22 : 0.2 h<\\/b> <br/> 2019-06-27 20:05:43 <br/> 3  fish <br/> Water level: 2 m, Up, 45 min since last peak\",\"<b>Session 23 : 3.3 h<\\/b> <br/> 2019-06-28 18:55:31 <br/> 3  fish <br/> Water level: 2 m, Down, 295 min since last peak\",\"<b>Session 23 : 3.3 h<\\/b> <br/> 2019-06-28 18:55:31 <br/> 3  fish <br/> Water level: 2 m, Down, 295 min since last peak\",\"<b>Session 23 : 3.3 h<\\/b> <br/> 2019-06-28 18:55:31 <br/> 3  fish <br/> Water level: 2 m, Down, 295 min since last peak\",\"<b>Session 24 : 1.4 h<\\/b> <br/> 2019-07-13 19:06:20 <br/> 0  fish <br/> Water level: 2 m, Down, 250 min since last peak\",\"<b>Session 25 : 0.2 h<\\/b> <br/> 2019-08-13 21:35:09 <br/> 0  fish <br/> Water level: 1 m, Down, 310 min since last peak\",\"<b>Session 26 : 1.3 h<\\/b> <br/> 2020-05-20 20:47:38 <br/> 2  fish <br/> Water level: 2 m, Down, 270 min since last peak\",\"<b>Session 26 : 1.3 h<\\/b> <br/> 2020-05-20 20:47:38 <br/> 2  fish <br/> Water level: 2 m, Down, 270 min since last peak\",\"<b>Session 27 : 0.0 h<\\/b> <br/> 2020-05-22 22:51:04 <br/> 3  fish <br/> Water level: 1 m, Down, 325 min since last peak\",\"<b>Session 27 : 0.0 h<\\/b> <br/> 2020-05-22 22:51:04 <br/> 3  fish <br/> Water level: 1 m, Down, 325 min since last peak\",\"<b>Session 27 : 0.0 h<\\/b> <br/> 2020-05-22 22:51:04 <br/> 3  fish <br/> Water level: 1 m, Down, 325 min since last peak\",\"<b>Session 28 : 1.4 h<\\/b> <br/> 2020-05-25 20:44:09 <br/> 1  fish <br/> Water level: 4 m, Down, 110 min since last peak\",\"<b>Session 29 : 1.2 h<\\/b> <br/> 2020-05-26 21:22:28 <br/> 0  fish <br/> Water level: 4 m, Down, 95 min since last peak\",\"<b>Session 30 : 1.3 h<\\/b> <br/> 2020-06-01 20:55:54 <br/> 1  fish <br/> Water level: 2 m, Up, 70 min since last peak\",\"<b>Session 31 : 2.3 h<\\/b> <br/> 2020-06-08 19:56:35 <br/> 0  fish <br/> Water level: 4 m, Down, 40 min since last peak\",\"<b>Session 32 : 2.0 h<\\/b> <br/> 2020-06-15 20:30:55 <br/> 0  fish <br/> Water level: 2 m, Up, 50 min since last peak\",\"<b>Session 33 : 1.1 h<\\/b> <br/> 2020-06-30 20:59:48 <br/> 0  fish <br/> Water level: 2 m, Up, 105 min since last peak\",\"<b>Session 34 : 2.5 h<\\/b> <br/> 2020-07-16 21:58:40 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 34 : 2.5 h<\\/b> <br/> 2020-07-16 21:58:40 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 34 : 2.5 h<\\/b> <br/> 2020-07-16 21:58:40 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 34 : 2.5 h<\\/b> <br/> 2020-07-16 21:58:40 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 34 : 2.5 h<\\/b> <br/> 2020-07-16 21:58:40 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 34 : 2.5 h<\\/b> <br/> 2020-07-16 21:58:40 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 34 : 2.5 h<\\/b> <br/> 2020-07-16 21:58:40 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 35 : 2.6 h<\\/b> <br/> 2020-07-17 21:51:40 <br/> 0  fish <br/> Water level: 2 m, Up, 20 min since last peak\",\"<b>Session 35 : 2.6 h<\\/b> <br/> 2020-07-17 21:51:40 <br/> 0  fish <br/> Water level: 2 m, Up, 20 min since last peak\",\"<b>Session 35 : 2.6 h<\\/b> <br/> 2020-07-17 21:51:40 <br/> 0  fish <br/> Water level: 2 m, Up, 20 min since last peak\",\"<b>Session 35 : 2.6 h<\\/b> <br/> 2020-07-17 21:51:40 <br/> 0  fish <br/> Water level: 2 m, Up, 20 min since last peak\",\"<b>Session 35 : 2.6 h<\\/b> <br/> 2020-07-17 21:51:40 <br/> 0  fish <br/> Water level: 2 m, Up, 20 min since last peak\",\"<b>Session 36 : 1.5 h<\\/b> <br/> 2020-07-18 23:25:07 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 36 : 1.5 h<\\/b> <br/> 2020-07-18 23:25:07 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 36 : 1.5 h<\\/b> <br/> 2020-07-18 23:25:07 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 36 : 1.5 h<\\/b> <br/> 2020-07-18 23:25:07 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 36 : 1.5 h<\\/b> <br/> 2020-07-18 23:25:07 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 36 : 1.5 h<\\/b> <br/> 2020-07-18 23:25:07 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 36 : 1.5 h<\\/b> <br/> 2020-07-18 23:25:07 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 36 : 1.5 h<\\/b> <br/> 2020-07-18 23:25:07 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 36 : 1.5 h<\\/b> <br/> 2020-07-18 23:25:07 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 36 : 1.5 h<\\/b> <br/> 2020-07-18 23:25:07 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 36 : 1.5 h<\\/b> <br/> 2020-07-18 23:25:07 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 36 : 1.5 h<\\/b> <br/> 2020-07-18 23:25:07 <br/> 0  fish <br/> Water level: 2 m, Up, 80 min since last peak\",\"<b>Session 37 : 1.6 h<\\/b> <br/> 2020-09-04 20:50:17 <br/> 3  fish <br/> Water level: 3 m, Down, 125 min since last peak\",\"<b>Session 37 : 1.6 h<\\/b> <br/> 2020-09-04 20:50:17 <br/> 3  fish <br/> Water level: 3 m, Down, 125 min since last peak\",\"<b>Session 37 : 1.6 h<\\/b> <br/> 2020-09-04 20:50:17 <br/> 3  fish <br/> Water level: 3 m, Down, 125 min since last peak\",\"<b>Session 38 : 0.6 h<\\/b> <br/> 2020-09-13 21:33:41 <br/> 0  fish <br/> Water level: 2 m, Up, 50 min since last peak\",\"<b>Session 39 : 0.2 h<\\/b> <br/> 2020-09-23 19:35:26 <br/> 1  fish <br/> Water level: 3 m, Up, 230 min since last peak\",\"<b>Session 40 : 0.6 h<\\/b> <br/> 2020-10-09 21:17:36 <br/> 0  fish <br/> Water level: 3 m, Up, 315 min since last peak\"],null,null,{\"maxWidth\":100,\"minWidth\":50,\"autoPan\":true,\"keepInView\":false,\"closeButton\":true,\"className\":\"\"}]}],\"limits\":{\"lat\":[43.4667765,43.4948349],\"lng\":[-1.5000672,-1.4522513]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\nComme vous pouvez le voir, je pêche principalement dans la  Nive, une rivière qui traverse la ville de Bayonne.\n\n### Quel est le meilleur moment pour pêcher ? \n\n#### Période de l'année  \n\nLe graphique suivant montre le nombre de poissons capturés en fonction de la période de l'année :\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncatch_cond %>% \ngroup_by(Session, Time_beg, .drop = F) %>% \nna.omit() %>% \nsummarise(n_catch = n()) %>% \nright_join(unique(catch_cond[, c(\"Session\", \"Time_beg\")])) %>% \nmutate(n_catch = ifelse(is.na(n_catch), 0, n_catch )) %>%\nggplot(aes(y = n_catch, x =Time_beg)) +\ngeom_point( size = 2) + \n  theme_minimal() + labs(x = \"Date\", y = \"Number of catch\") + scale_x_datetime(date_labels = \"%d/%m/%y\", date_breaks = \"3 months\") \n```\n\n::: {.cell-output-display}\n![](index.fr_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nAvec de ce graphique, on constate que je ne suis pas allé pêcher durant l'automne et l'hiver 2019, je n'ai donc aucune donnée pour ces saisons. Et c'est bête pour moi car l'automne est réputé être une excellente période pour la pêche au bar! Je dois aller pêcher cette année pour compenser ce manque de données. En hiver, la pêche est vraiment compliquée, car la grande majorité des bars retournent vers l'océan.\n\n#### Heure de la journée  \n\nCe graphique montre le nombre de poissons capturés en fonction de l'heure de la journée :\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncatch_cond %>% \ngroup_by(Session, Time_beg, .drop = F) %>% \nna.omit() %>% \nsummarise(n_catch = n()) %>% \nright_join(unique(catch_cond[, c(\"Session\", \"Time_beg\")])) %>% \nmutate(n_catch = ifelse(is.na(n_catch), 0, n_catch ), \nhour = format(Time_beg, \"%H\")) %>%\nggplot(aes(y = n_catch, x =hour)) +\ngeom_point( size = 2)  + labs(x = \"Hour\", y = \"Number of catch\")+\ntheme_minimal()\n```\n\n::: {.cell-output-display}\n![](index.fr_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nJe pêche principalement après le travail ou en soirée. Pour tirer des conclusions pertinentes sur l'influence de l'heure de pêche, je dois aller pêcher à différents moments de la journée (le matin, par exemple).\n\n#### La marée  \n\nLa marée est un paramètre important pour la pêche en estuaire. Voyons l'effet du courant de marée sur mes prises :\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggpubr)\n\ngg1 <- catch_cond %>% \n  group_by(Session, Tide_status_ses, .drop = F)  %>%  \n  drop_na() %>% \n  summarise(n_catch = n()) %>% \n  right_join(unique(catch_cond[, c(\"Session\", \"Tide_status_ses\")])) %>% \n  mutate(n_catch = ifelse(is.na(n_catch), 0, n_catch )) %>%\n  ggplot(aes(y = n_catch, x = Tide_status_ses, fill = Tide_status_ses)) +\n  geom_boxplot() +\n  labs(x = \"Status of tide current\", y = \"Number of catch\") +\n  theme_minimal()+ theme(legend.position=\"None\")\n\ngg2 <- catch_cond %>% \n  na.omit() %>% \n  ggplot(aes(y = length,x = Tide_status_ses, fill = Tide_status_ses)) +\n  geom_boxplot()+\n  labs(x = \"Status of tide current\", y = \"Length of the fish\") +\n  theme_minimal()+ theme(legend.position=\"None\")\n\nggarrange(gg1, gg2)\n```\n\n::: {.cell-output-display}\n![](index.fr_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nIl semble que l'état du courant de marée n'influence pas le nombre de prises, mais qu'il affecte la taille des poissons. J'ai tendance à attraper des poissons plus gros lorsque le courant descend.\n\n### La lune affecte-t-elle mes résultats de pêche ?  \n\nUne croyance largement répandue chez les pêcheurs est que la lune influence fortement le comportement des poissons. Les données sur la phase lunaire étaient disponibles grâce à l'API météo, j'ai donc décidé d'enregistrer cette variable pour vérifier si cette croyance était fondée.  \nLes deux graphiques ci-dessous montrent le nombre et la taille des poissons en fonction de la phase de la lune (0 correspondant à la nouvelle lune et 1 à la pleine lune) :\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngg3 <- catch_cond %>% \n  group_by(Session, Moon, .drop = F) %>%  \n  na.omit() %>% \n  summarise(n_catch = n()) %>% \n  right_join(unique(catch_cond[, c(\"Session\", \"Moon\")])) %>% \n  mutate(n_catch = ifelse(is.na(n_catch), 0, n_catch )) %>% \n  ggplot(aes(y = n_catch, x = Moon)) +\n  geom_point( size = 2) +\n  labs(x = \"Moon phase\", y = \"Number of catch\")+\n  theme_minimal()\n\ngg4 <- catch_cond %>% \n  ggplot(aes(y = length, x = Moon)) +\n  geom_point( size = 2) +\n  geom_smooth(method=\"lm\", se=T) + \n  labs(x = \"Moon phase\", y = \"Length of the fish\")+\n  theme_minimal()\n\nggarrange(gg3, gg4)\n```\n\n::: {.cell-output-display}\n![](index.fr_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nLa phase de la lune ne semble pas influencer le nombre de poissons que j'attrape lors d'une session. Cependant, j'ai tendance à attraper des poissons plus gros à mesure que l'on se rapproche de la pleine lune. Pour confirmer cette observation, je dois continuer à pêcher afin de collecter plus de données !\n\n### La météo influence-t-elle mes résultats de pêche ?  \n\nOn peut examiner le nombre de poissons capturés dans différentes conditions météorologiques :\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# precipitation probability \n\ngg5 <- catch_cond %>% \n  group_by(Session, Preci_prob, .drop = F) %>%  \n  na.omit() %>% \n  summarise(n_catch = n()) %>% \n  right_join(unique(catch_cond[, c(\"Session\", \"Preci_prob\")])) %>% \n  mutate(n_catch = ifelse(is.na(n_catch), 0, n_catch )) %>% \n  ggplot(aes(y = n_catch, x = Preci_prob)) +\n  geom_point()+\n  labs(x = \"Precipitation prob.\", y = \"Number of catch\")+\n  theme_minimal()\n\n# Atm pressure \n\ngg6 <- catch_cond %>% \n  group_by(Session, Atm_pres, .drop = F) %>%  \n  na.omit() %>% \n  summarise(n_catch = n()) %>% \n  right_join(unique(catch_cond[, c(\"Session\", \"Atm_pres\")])) %>% \n  mutate(n_catch = ifelse(is.na(n_catch), 0, n_catch )) %>% \n  ggplot(aes(y = n_catch, x = Atm_pres)) +\n  geom_point() +\n  labs(x = \"Atm. pressure\", y = \"Number of catch\")+\n  theme_minimal()\n\n#Air temp\n\ngg7 <- catch_cond %>% \n  group_by(Session, Air_temp, .drop = F) %>%  \n  na.omit() %>% \n  summarise(n_catch = n()) %>% \n  right_join(unique(catch_cond[, c(\"Session\", \"Air_temp\")])) %>% \n  mutate(n_catch = ifelse(is.na(n_catch), 0, n_catch )) %>% \n  ggplot(aes(y = n_catch, x = Air_temp)) +\n  geom_point() +\n  labs(x = \"Air temp.\", y = \"Number of catch\")+\n  theme_minimal()\n\n\n#Cloud cover\n\ngg8 <- catch_cond %>% \n  group_by(Session, Cloud_cover, .drop = F) %>%  \n  na.omit() %>% \n  summarise(n_catch = n()) %>% \n  right_join(unique(catch_cond[, c(\"Session\", \"Cloud_cover\")])) %>% \n  mutate(n_catch = ifelse(is.na(n_catch), 0, n_catch )) %>% \n  ggplot(aes(y = n_catch, x = Cloud_cover)) +\n  geom_point() +\n  labs(x = \"Cloud cover\", y = \"Number of catchh\")+\n  theme_minimal()\n\nggarrange(gg5, gg6, gg7, gg8)\n```\n\n::: {.cell-output-display}\n![](index.fr_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n\nEn fonction de leur taille:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngg15 <- catch_cond %>% \n  ggplot(aes(y = length, x = Preci_prob)) +\n  geom_point( size = 2) +\n  labs( y = \"Length of the fish\")+\n  theme_minimal()\n\ngg16 <- catch_cond %>% \n  ggplot(aes(y = length, x = Atm_pres)) +\n  geom_point( size = 2) +\n  labs( y = \"Length of the fish\")+\n  theme_minimal()\n\ngg17 <- catch_cond %>% \n  ggplot(aes(y = length, x = Air_temp)) +\n  geom_point( size = 2) +\n  labs( y = \"Length of the fish\")+\n  theme_minimal()\n\n\ngg18  <- catch_cond %>% \n  ggplot(aes(y = length, x = Cloud_cover)) +\n  geom_point( size = 2) +\n  labs( y = \"Length of the fish\")+\n  theme_minimal()\n\nggarrange(gg15, gg16, gg17, gg18)\n```\n\n::: {.cell-output-display}\n![](index.fr_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nÉtant donné que j'ai des données limitées et que toutes les conditions météorologiques ne sont pas couvertes, il est difficile de tirer des conclusions.\n\n### Quels sont les meilleurs leurres pour attraper du poisson ?  \n\nÀ chaque prise, je remplis un petit formulaire dans mon application Shiny afin d'enregistrer les caractéristiques du leurre utilisé. Il existe différents types de leurres ayant des nages spécifiques, des couleurs et des tailles variées. On peut représenter le nombre de poissons capturés en fonction des caractéristiques du leurre :\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlevels(catch_cond$colour) <- c(\"clear\", \"natural\", \"dark\")\nlevels(catch_cond$length_lure) <- c(\"large\", \"medium\", \"small\")\n\ngg9 <- catch_cond %>% \n  na.omit() %>% \n  ggplot( aes(x=lure, fill = lure)) +\n  geom_bar(stat=\"count\", width=0.7)+\n  labs(x = \"Type of lure\", y = \"\")+\n  theme_minimal()+ \n  theme(legend.position=\"None\")\n\ngg10 <- catch_cond %>% \n  na.omit() %>% \n  ggplot( aes(x=colour, fill = colour)) +\n  geom_bar(stat=\"count\", width=0.7)+\n  labs(x = \"Color of the lures\", y = \"\")+\n  theme_minimal()+\n    scale_fill_brewer(palette=\"BuPu\")+ \n  theme(legend.position=\"None\")\n\ngg11 <- catch_cond %>% \n  na.omit() %>%\n  ggplot( aes(x=length_lure, fill = length_lure)) +\n  geom_bar(stat=\"count\", width=0.7)+\n  labs(x = \"Size of the lure\", y = \"\")+\n    scale_fill_brewer(palette=\"Dark2\")+\n  theme_minimal()+ theme(legend.position=\"None\")\n\nannotate_figure(ggarrange(gg9, gg10, gg11, ncol = 3),\n                left = text_grob(\"Number of catch\", rot = 90)\n)\n```\n\n::: {.cell-output-display}\n![](index.fr_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nOn peut faire de même pour la longueur des poissons capturés :\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngg12 <-catch_cond %>% \n  na.omit() %>% \n  ggplot(aes(y = length, x = lure, fill=lure)) +\n  geom_boxplot()+\n  labs(x = \"Type of lure\", y = \"\")+\n  theme_minimal()+ theme(legend.position=\"None\")\n\ngg13 <-catch_cond %>% \n  na.omit() %>%\n  ggplot(aes(y = length, x = colour, fill= colour)) +\n  geom_boxplot()+\n  labs(x = \"Color of the lures\", y = \"\")+\n  theme_minimal()+\n    scale_fill_brewer(palette=\"BuPu\")+ theme(legend.position=\"None\")\n\ngg14 <-catch_cond %>% \n  na.omit() %>%\n  ggplot(aes(y = length, x = length_lure, fill=length_lure)) +\n  geom_boxplot()+\n  labs(x = \"Size of the lure\", y = \"\")+\n  theme_minimal()+\n    scale_fill_brewer(palette=\"Dark2\")+ theme(legend.position=\"None\")\n\nannotate_figure(ggarrange(gg12, gg13, gg14, ncol = 3),\n                left = text_grob(\"Length of fish\", rot = 90)\n)\n```\n\n::: {.cell-output-display}\n![](index.fr_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\nAvec ces 6 graphiques, on peut voir que les leurres les plus efficaces pour moi sont les types shad et slug. Mention honorable jerkbait : je n'ai attrapé que 2 poissons avec, mais 2 gros (médiane autour de 47 cm). Les couleurs qui ont le mieux fonctionné sont les couleurs claires et naturelles. Pour la taille des leurres, les plus grands ont tendance à attraper des poissons plus gros en moyenne. Ces conclusions doivent être prises avec des pincettes, car je n'ai pas enregistré le temps passé avec chaque leurre avant d’attraper un poisson. De plus, j’ai tendance à utiliser les mêmes types et couleurs de leurres (par habitude), je vais me forcer à varier davantage.\n\n## Conclusion\n\nL’analyse de mes données de pêche a été très intéressante et m’a apporté des insights sur mon style de pêche ! J’ai compris que je pêchais presque toujours de la même manière, avec les mêmes habitudes. Bien que cela semble fonctionner pour moi, j’ai une vision biaisée de la façon d’attraper le bar européen. Je dois utiliser des leurres plus grands pour attraper de plus gros poissons et varier les types de leurres utilisés. En effet, je pêche la plupart du temps avec des leurres slug ou shad, d’où le plus grand nombre de prises avec ces types de leurres.\n\nJe vais continuer à utiliser l’application pour collecter plus de données et mieux comprendre mes sessions de pêche. Je vous tiendrai au courant des résultats ! :wink: \n\n\n\n\n",
    "supporting": [
      "index.fr_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../../site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/leaflet-1.3.1/leaflet.js\"></script>\n<link href=\"../../site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/proj4-2.6.2/proj4.min.js\"></script>\n<script src=\"../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\n<link href=\"../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/leaflet-binding-2.2.2/leaflet.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}